<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Memory - Monstruo de Colores</title>
<style>
  body{
    margin:0;
    font-family: "Comic Sans MS", Arial, sans-serif;
    background:#fdf6e3;
    display:flex;
    justify-content:center;
    align-items:center;
    min-height:100vh;
    padding:20px;
  }
  .app{
    max-width:900px;
    width:100%;
    background:white;
    border-radius:16px;
    padding:20px;
    box-shadow:0 6px 20px rgba(0,0,0,0.15);
  }
  h1{text-align:center;color:#444;margin-bottom:10px}
  .board{
    display:grid;
    grid-template-columns:repeat(4,1fr);
    gap:10px;
    margin-top:15px;
  }
  .card{
    width:100%;aspect-ratio:1/1;
    perspective:600px;
    cursor:pointer;
  }
  .inner{
    width:100%;height:100%;
    transition:transform .5s;
    transform-style:preserve-3d;
    position:relative;
  }
  .flipped .inner{transform:rotateY(180deg)}
  .face{
    position:absolute;inset:0;
    backface-visibility:hidden;
    border-radius:12px;
    display:flex;align-items:center;justify-content:center;
    background:#eee;
  }
  .front{
    background:#6c63ff;
  }
  .back{
    transform:rotateY(180deg);
    flex-direction:column;
    background:#fffbe7;
    border:2px solid #ddd;
  }
  .back img{
    max-width:80%;max-height:70%;
    object-fit:contain;
  }
  .label{margin-top:4px;font-weight:bold;color:#333}
  .status{text-align:center;margin-top:10px;font-weight:bold}
</style>
</head>
<body>
<div class="app">
  <h1>Juego de Memoria ðŸŽ¨ Monstruos de Colores</h1>
  <div class="status">Intentos: <span id="attempts">0</span> | Aciertos: <span id="matches">0</span></div>
  <div class="board" id="board"></div>
</div>

<script>
const EMOTIONS = [
  {img:"feliz.png", label:"Feliz"},
  {img:"triste.png", label:"Triste"},
  {img:"enojado.png", label:"Enojado"},
  {img:"asustado.png", label:"Asustado"},
  {img:"calmado.png", label:"Calmado"},
  {img:"enamorado.png", label:"Enamorado"}
];

const board = document.getElementById("board");
const attemptsEl = document.getElementById("attempts");
const matchesEl = document.getElementById("matches");

let firstCard=null, secondCard=null;
let lock=false;
let attempts=0, matches=0;

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr;
}

function buildBoard(){
  board.innerHTML="";
  attempts=0; matches=0;
  attemptsEl.textContent=attempts;
  matchesEl.textContent=matches;

  const chosen = EMOTIONS;
  const pairSet = shuffle([...chosen,...chosen]);

  pairSet.forEach(item=>{
    const card=document.createElement("div");
    card.className="card";
    card.innerHTML=`
      <div class="inner">
        <div class="face front"></div>
        <div class="face back">
          <img src="img/${item.img}" alt="${item.label}">
          <div class="label">${item.label}</div>
        </div>
      </div>`;
    card.addEventListener("click",()=>flip(card,item));
    board.appendChild(card);
  });
}

function flip(card,item){
  if(lock) return;
  if(card===firstCard) return;
  card.classList.add("flipped");
  if(!firstCard){
    firstCard=card;
    return;
  }
  secondCard=card;
  lock=true;
  attempts++;
  attemptsEl.textContent=attempts;
  setTimeout(()=>checkMatch(item),700);
}

function checkMatch(item){
  const img1=firstCard.querySelector("img").src;
  const img2=secondCard.querySelector("img").src;
  if(img1===img2){
    matches++;
    matchesEl.textContent=matches;
    firstCard=null; secondCard=null; lock=false;
    if(matches===EMOTIONS.length){
      setTimeout(()=>alert("ðŸŽ‰ Â¡Felicidades! Completaste el memory."),300);
    }
  }else{
    firstCard.classList.remove("flipped");
    secondCard.classList.remove("flipped");
    firstCard=null; secondCard=null; lock=false;
  }
}

buildBoard();
</script>
</body>
</html>
